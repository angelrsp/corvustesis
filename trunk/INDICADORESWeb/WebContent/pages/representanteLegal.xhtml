<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">

<h:head></h:head>
<body>

	<ui:composition template="/template/privado.xhtml">
		<ui:define name="contenido">
<h:form id="contenido">
			
			
				<p:growl id="growl" showDetail="false" />
				
				<p:panel id="pnlDatos" styleClass="tabla" header="Representante Legal">				
				<table>
				
					<tr>
						<td><h:outputLabel value="#{i18n['label.nombres']}:&#160;" /> </td>
						<td><p:inputText required="true"
									requiredMessage="#{i18n['label.nombres']}&#160;#{i18n['label.requerido']}"
									value="#{representanteLegalController.representanteLegalDTO.rleNombres}"/><span class="red">*</span></td>
					</tr>

					<tr>
						<td><h:outputLabel value="#{i18n['label.apellidos']}:&#160;" /> </td>
						<td><p:inputText required="true"
									requiredMessage="#{i18n['label.apellidos']}&#160;#{i18n['label.requerido']}"
									value="#{representanteLegalController.representanteLegalDTO.rleApellidos}"/><span class="red">*</span></td>						
					</tr>

					<tr>
						<td><h:outputLabel value="#{i18n['label.tipo.documento']}:&#160;" /> </td>
							<td><p:selectOneMenu value="#{representanteLegalController.tipoDocumento}" required="true" requiredMessage="#{i18n['label.tipo.documento']}:&#160;#{i18n['label.requerido']}">
									<f:selectItem itemLabel="#{i18n['combo.seleccionar']}" itemValue="" />
									<f:selectItems value="#{representanteLegalController.catalogoTipoDocumento}"></f:selectItems>	
								</p:selectOneMenu><span class="red">*</span></td>
					</tr>

					<tr>
						<td><h:outputLabel value="#{i18n['label.di']}:&#160;" /> </td>
						<td><p:inputText required="true"
									requiredMessage="#{i18n['label.di']}&#160;#{i18n['label.requerido']}"
									value="#{representanteLegalController.representanteLegalDTO.rleDi}" onkeypress="return isNumberKey(event)"/><span class="red">*</span></td>						
					</tr>


					<tr>
						<td colspan="2" align="center">
							<p:commandButton actionListener="#{representanteLegalController.guardarRepresentante}" value="#{i18n['boton.guardar']}" process="pnlDatos" update="growl,pnlDatos,repList"/> </td>
					</tr>
				
				</table>	

				
				<p:dataTable id="repList" value="#{representanteLegalController.representanteList}" var="rep">

					<p:column headerText="#{i18n['label.nombres']}">
						<h:outputText value="#{rep.rleNombres}" />
					</p:column>

					<p:column headerText="#{i18n['label.apellidos']}">
						<h:outputText value="#{rep.rleApellidos}" />
					</p:column>

					<p:column headerText="#{i18n['label.tipo.documento']}">
						<h:outputText value="#{rep.catTipoDocumento}" />
					</p:column>

					<p:column headerText="#{i18n['label.di']}">
						<h:outputText value="#{rep.rleDi}" />
					</p:column>

				<p:column style="width:10%" headerText="#{i18n['label.contactos']}">  
	                <p:commandButton actionListener="#{representanteLegalController.cargarContacto(rep)}" oncomplete="PF('dlgContacto').show()" icon="ui-icon-contact" 
	                	update=":contenido:pnlContactos" process="repList" title="#{i18n['label.ver.mas']}">    
	    	        </p:commandButton>  
		        </p:column>

								
				</p:dataTable>

											
				</p:panel>
				
				
	
				<p:dialog id="dlgContacto" widgetVar="dlgContacto" modal="true" header="Contactos">
				
					<p:panel id="pnlContactos" styleClass="tabla">
																
					<table>
					
						<tr>
							<td><h:outputLabel value="#{i18n['label.tipo']}:&#160;" /> </td>
							<td><p:selectOneMenu value="#{representanteLegalController.tipoContacto}" required="true" requiredMessage="#{i18n['label.tipo']}:&#160;#{i18n['label.requerido']}">
									<f:selectItem itemLabel="#{i18n['combo.seleccionar']}" itemValue="" />
									<f:selectItems value="#{representanteLegalController.catalogoTipoContacto}"></f:selectItems>	
								</p:selectOneMenu></td>
						</tr>
	
						<tr>
							<td><h:outputLabel value="#{i18n['label.valor']}:&#160;" /> </td>
							<td><p:inputText required="true"
										requiredMessage="#{i18n['label.valor']}&#160;#{i18n['label.requerido']}"
										value="#{representanteLegalController.contactoDTO.conValor}"/></td>						
						</tr>
	
						<tr>
							<td colspan="2" align="center">
								<p:commandButton actionListener="#{representanteLegalController.agregarContacto}" value="#{i18n['boton.agregar']}" process="pnlContactos" update="pnlContactos,:contenido:growl" /> </td>
						</tr>
					
					</table>	
													

					<p:dataTable id="tblContacto" value="#{representanteLegalController.contactoList}" var="con">

						<p:column headerText="#{i18n['label.tipo']}">
							<h:outputText value="#{con.catTipoContacto}" />
						</p:column>

						<p:column headerText="#{i18n['label.valor']}">
							<h:outputText value="#{con.conValor}" />
						</p:column>
					
					</p:dataTable>					

					</p:panel>

				</p:dialog>			
	
	
</h:form>
		</ui:define>
	</ui:composition>

</body>
</html>