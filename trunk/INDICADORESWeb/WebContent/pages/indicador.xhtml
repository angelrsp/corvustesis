<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">

<h:head></h:head>
<body>

	<ui:composition template="/template/privado.xhtml">
		<ui:define name="contenido">
<h:form id="contenido">

			
				<p:growl id="growl" showDetail="false" />
				<p:panel id="pnlDatos" styleClass="tabla"
					header="Indicador">
					
				<table>
					<tr>
							<td><h:outputLabel value="#{i18n['label.modelo']}:&#160;" /> </td>
							<td><p:selectOneMenu required="true" requiredMessage="#{i18n['label.modelo']}:&#160;#{i18n['label.requerido']}" value="#{indicadorController.modelo}" disabled="#{indicadorController.disabled}">
								<f:selectItem itemLabel="#{i18n['combo.seleccionar']}" itemValue=""/>
								<f:selectItems value="#{indicadorController.modeloList}"></f:selectItems>
								<p:ajax event="change" process="@this" update="tree,growl" listener="#{indicadorController.obtenerArbol}" immediate="true"></p:ajax>
								<p:ajax event="change" process="@this" update="predecesor,tree,growl" listener="#{indicadorController.obtenerArbol}" immediate="true"></p:ajax>											
							</p:selectOneMenu></td>
					</tr>
					<tr>
							<td><h:outputLabel value="#{i18n['label.ies']}:&#160;" /> </td>
							<td><p:selectOneMenu required="true" requiredMessage="#{i18n['label.ies']}:&#160;#{i18n['label.requerido']}" value="#{indicadorController.ies}" disabled="#{indicadorController.disabled}">
								<f:selectItem itemLabel="#{i18n['combo.seleccionar']}" itemValue="0"/>
								<f:selectItems value="#{indicadorController.iesList}"></f:selectItems>
								<p:ajax event="change" process="@this" update="tree,growl" listener="#{indicadorController.obtenerArbol}" immediate="true"></p:ajax>
								<p:ajax event="change" process="@this" update="predecesor,tree,growl" listener="#{indicadorController.obtenerArbol}" immediate="true"></p:ajax>																			
							</p:selectOneMenu></td>
					</tr>

					<tr>
						<td><h:outputLabel value="#{i18n['label.nombre.corto']}:&#160;" /> </td>
						<td><p:inputText required="true"
									requiredMessage="#{i18n['label.nombre.corto']}&#160;#{i18n['label.requerido']}"
									value="#{indicadorController.indicadorDTO.indNombreCorto}"/></td>
					</tr>

					<tr>
						<td><h:outputLabel value="#{i18n['label.nombre.largo']}:&#160;" /> </td>
						<td><p:inputText required="true"
									requiredMessage="#{i18n['label.nombre.largo']}&#160;#{i18n['label.requerido']}"
									value="#{indicadorController.indicadorDTO.indNombreLargo}"/></td>
					</tr>

					<tr>
						<td><h:outputLabel value="#{i18n['label.peso']}:&#160;" /> </td>
						<td><p:inputText required="true"
									requiredMessage="#{i18n['label.peso']}&#160;#{i18n['label.requerido']}"
									value="#{indicadorController.indicadorDTO.indPeso}"/>
									<p:button id="helpPeso" style="width: 15px; height: 15px" icon="ui-icon-help" onclick="return false;"/>
									<p:tooltip for="helpPeso" value="Ayuda" showEffect="fade" hideEffect="fade" />  
						</td>
					</tr>

					<tr>
						<td><h:outputLabel value="#{i18n['label.utilidad']}:&#160;" /> </td>
						<td><p:inputText required="true"
									requiredMessage="#{i18n['label.utilidad']}&#160;#{i18n['label.requerido']}"
									value="#{indicadorController.indicadorDTO.indUtilidad}"/>
									<p:button id="helpUtilidad" style="width: 15px; height: 15px" icon="ui-icon-help" onclick="return false;"/>
									<p:tooltip for="helpUtilidad" value="Ayuda" showEffect="fade" hideEffect="fade" />  									
						</td>
					</tr>
					
					<tr>
						<td><h:outputLabel value="#{i18n['label.tipo']}:&#160;" /> </td>
							<td><p:selectOneMenu value="#{indicadorController.tipoIndicador}" required="true" requiredMessage="#{i18n['label.tipo.documento']}:&#160;#{i18n['label.requerido']}">
									<f:selectItem itemLabel="#{i18n['combo.seleccionar']}" itemValue="" />
									<f:selectItems value="#{indicadorController.catalogoTipoIndicador}"></f:selectItems>	
							</p:selectOneMenu></td>
					</tr>
					
					<tr>
						<td><h:outputLabel value="#{i18n['label.valor.objetivo']}:&#160;" /> </td>
						<td><p:inputText required="true"
									requiredMessage="#{i18n['label.valor.objetivo']}&#160;#{i18n['label.requerido']}"
									value="#{indicadorController.indicadorDTO.indValorObjetivo}" onkeypress="return isDecimalKey(event);"/>
									<p:button id="helpObjetivo" style="width: 15px; height: 15px" icon="ui-icon-help" onclick="return false;"/>
									<p:tooltip for="helpObjetivo" value="Ayuda" showEffect="fade" hideEffect="fade" />  																		
						</td>
					</tr>

					<tr>
						<td><h:outputLabel value="#{i18n['label.valor.ideal']}:&#160;" /> </td>
						<td><p:inputText required="true"
									requiredMessage="#{i18n['label.valor.ideal']}&#160;#{i18n['label.requerido']}"
									value="#{indicadorController.indicadorDTO.indValorIdeal}" onkeypress="return isDecimalKey(event);"/>
									<p:button id="helpIdeal" style="width: 15px; height: 15px" icon="ui-icon-help" onclick="return false;"/>
									<p:tooltip for="helpIdeal" value="Ayuda" showEffect="fade" hideEffect="fade" />  																											
						</td>
					</tr>

					<tr>
						<td><h:outputLabel value="#{i18n['label.orden']}:&#160;" /> </td>
						<td><p:inputText required="true"
									requiredMessage="#{i18n['label.orden']}&#160;#{i18n['label.requerido']}"
									value="#{indicadorController.indicadorDTO.indOrden}" onkeypress="return isNumberKey(event);"/></td>
					</tr>

					<tr>
						<td><h:outputLabel value="#{i18n['label.descriptor']}:&#160;" /> </td>
						<td><p:editor required="true" requiredMessage="#{i18n['label.descriptor']}&#160;#{i18n['label.requerido']}"
									value="#{indicadorController.indicadorDTO.indDescriptor}"/></td>
					</tr>

					<tr>
						<td><h:outputLabel value="#{i18n['label.predecesor']}:&#160;" /> </td>
							<td><p:selectOneMenu id="predecesor" requiredMessage="#{i18n['label.predecesor']}:&#160;#{i18n['label.requerido']}" value="#{indicadorController.predecesor}">
									<f:selectItem itemLabel="#{i18n['combo.seleccionar']}" itemValue=""/>
									<f:selectItems value="#{indicadorController.indicadorList}" var="in" itemLabel="#{in.indNombreCorto}" itemValue="#{in.indCodigo}"></f:selectItems>
							</p:selectOneMenu></td>
					</tr>
					<tr>
						<td colspan="2" align="center">
							<p:commandButton actionListener="#{indicadorController.agregarIndicador}" value="#{i18n['boton.guardar']}" process="pnlDatos" update="tree,pnlDatos,growl" icon="ui-icon-disk"/>
							<p:commandButton actionListener="#{indicadorController.delete}" value="#{i18n['boton.eliminar']}" process="@this" update="tree,pnlDatos,growl" icon="ui-icon-close"/>
							<p:commandButton actionListener="#{indicadorController.cancel}" value="#{i18n['boton.cancelar']}" process="@this" update="tree,pnlDatos,growl" icon="ui-icon-cancel"/> 
							</td>
					</tr>
					
				</table>	

				<p:tree value="#{indicadorController.rootNode}" var="node" id="tree" selection="#{indicadorController.selectedNode}" selectionMode="single" style="width:99%;">
					<p:ajax event="select" listener="#{indicadorController.onNodeSelect}" update=":contenido:growl,:contenido:pnlDatos"/>  
			        <p:treeNode id="treeNode">  
			            <h:outputText value="#{node.indNombreCorto}"/>
			        </p:treeNode>  
			    </p:tree>  
						
				</p:panel>
			

</h:form>
		</ui:define>
	</ui:composition>

</body>
</html>