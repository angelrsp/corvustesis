<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">

<h:head></h:head>
<body>

	<ui:composition template="/template/privado.xhtml">
		<ui:define name="contenido">
<h:form id="contenido">

			
				<p:growl id="growl" showDetail="false" />
				<p:panel id="pnlDatos" styleClass="tabla"
					header="Indicador">
					
				<table>
					<tr>
							<td><h:outputLabel value="#{i18n['label.modelo']}:&#160;" /> </td>
							<td><p:selectOneMenu required="true" requiredMessage="#{i18n['label.modelo']}:&#160;#{i18n['label.requerido']}" value="#{indicadorController.modelo}">
								<f:selectItem itemLabel="#{i18n['combo.seleccionar']}" itemValue=""/>
								<f:selectItems value="#{indicadorController.modeloList}"></f:selectItems>
								<p:ajax event="change" process="@this" update="tree,growl" listener="#{indicadorController.obtenerArbol}" immediate="true"></p:ajax>
								<p:ajax event="change" process="@this" update="predecesor,tree,growl" listener="#{indicadorController.obtenerArbol}" immediate="true"></p:ajax>											
							</p:selectOneMenu></td>
					</tr>
					<tr>
							<td><h:outputLabel value="#{i18n['label.ies']}:&#160;" /> </td>
							<td><p:selectOneMenu required="true" requiredMessage="#{i18n['label.ies']}:&#160;#{i18n['label.requerido']}" value="#{indicadorController.ies}">
								<f:selectItem itemLabel="#{i18n['combo.seleccionar']}" itemValue="0"/>
								<f:selectItems value="#{indicadorController.iesList}"></f:selectItems>
								<p:ajax event="change" process="@this" update="tree,growl" listener="#{indicadorController.obtenerArbol}" immediate="true"></p:ajax>
								<p:ajax event="change" process="@this" update="predecesor,tree,growl" listener="#{indicadorController.obtenerArbol}" immediate="true"></p:ajax>																			
							</p:selectOneMenu></td>
					</tr>

					<tr>
						<td><h:outputLabel value="#{i18n['label.nombre.corto']}:&#160;" /> </td>
						<td><p:inputText required="true"
									requiredMessage="#{i18n['label.nombre.corto']}&#160;#{i18n['label.requerido']}"
									value="#{indicadorController.indicadorDTO.indNombreCorto}"/></td>
					</tr>

					<tr>
						<td><h:outputLabel value="#{i18n['label.nombre.largo']}:&#160;" /> </td>
						<td><p:inputText required="true"
									requiredMessage="#{i18n['label.nombre.largo']}&#160;#{i18n['label.requerido']}"
									value="#{indicadorController.indicadorDTO.indNombreLargo}"/></td>
					</tr>

					<tr>
						<td><h:outputLabel value="#{i18n['label.peso']}:&#160;" /> </td>
						<td><p:inputText required="true"
									requiredMessage="#{i18n['label.peso']}&#160;#{i18n['label.requerido']}"
									value="#{indicadorController.indicadorDTO.indPeso}"/></td>
					</tr>

					<tr>
						<td><h:outputLabel value="#{i18n['label.utilidad']}:&#160;" /> </td>
						<td><p:inputText required="true"
									requiredMessage="#{i18n['label.utilidad']}&#160;#{i18n['label.requerido']}"
									value="#{indicadorController.indicadorDTO.indUtilidad}"/></td>
					</tr>
					
					<tr>
						<td><h:outputLabel value="#{i18n['label.valor.ideal']}:&#160;" /> </td>
						<td><p:inputText required="true"
									requiredMessage="#{i18n['label.valor.ideal']}&#160;#{i18n['label.requerido']}"
									value="#{indicadorController.indicadorDTO.indValorIdeal}" onkeypress="return isDecimalKey(event);"/></td>
					</tr>

					<tr>
						<td><h:outputLabel value="#{i18n['label.valor.objetivo']}:&#160;" /> </td>
						<td><p:inputText required="true"
									requiredMessage="#{i18n['label.valor.objetivo']}&#160;#{i18n['label.requerido']}"
									value="#{indicadorController.indicadorDTO.indValorObjetivo}" onkeypress="return isDecimalKey(event);"/></td>
					</tr>

					<tr>
						<td><h:outputLabel value="#{i18n['label.descriptor']}:&#160;" /> </td>
						<td><p:inputTextarea required="true"
									requiredMessage="#{i18n['label.descriptor']}&#160;#{i18n['label.requerido']}"
									value="#{indicadorController.indicadorDTO.indDescriptor}" autoResize="false"/></td>
					</tr>

					<tr>
						<td><h:outputLabel value="#{i18n['label.predecesor']}:&#160;" /> </td>
							<td><p:selectOneMenu id="predecesor" requiredMessage="#{i18n['label.predecesor']}:&#160;#{i18n['label.requerido']}" value="#{indicadorController.predecesor}">
									<f:selectItem itemLabel="#{i18n['combo.seleccionar']}" itemValue=""/>
									<f:selectItems value="#{indicadorController.indicadorList}" var="in" itemLabel="#{in.indNombreCorto}" itemValue="#{in.indCodigo}"></f:selectItems>
							</p:selectOneMenu></td>
					</tr>
					<tr>
						<td colspan="2" align="center">
							<p:commandButton actionListener="#{indicadorController.agregarIndicador}" value="#{i18n['boton.guardar']}" process="pnlDatos" update="tree,pnlDatos,growl"/> </td>
					</tr>
					
				</table>	

				<p:tree value="#{indicadorController.rootNode}" var="node" id="tree">  
			        <p:treeNode id="treeNode">  
			            <h:outputText value="#{node.indNombreCorto}"/>  
			        </p:treeNode>  
			    </p:tree>  
						
				</p:panel>
			

</h:form>
		</ui:define>
	</ui:composition>

</body>
</html>